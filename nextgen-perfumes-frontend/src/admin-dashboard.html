<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextGen Perfumes - Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css">
    <link rel="stylesheet" href="../../../../../../Desktop/master/themewagon.github.io/Dewi/assets/css/main.css">
    <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
    <!-- Header -->
    <header class="header d-flex align-items-center" style="position: fixed; top: 0; left: 0; right: 0; background-color: var(--surface-color); border-bottom: 1px solid color-mix(in srgb, var(--default-color), transparent 85%); z-index: 1000;">
        <div class="container-fluid">
            <div class="d-flex align-items-center justify-content-between">
                <div class="logo d-flex align-items-center">
                    <h1 class="mb-0" style="color: var(--heading-color); font-size: 24px;">NextGen Perfumes</h1>
                    <span class="ms-2 badge" style="background-color: var(--accent-color); color: var(--contrast-color);">Admin</span>
                </div>
                <div class="d-flex align-items-center">
                    <button class="btn btn-soft-primary me-2" title="Notifications" aria-label="Notifications" type="button">
                        <i class="ri-notification-line" aria-hidden="true"></i>
                        <span class="visually-hidden">Notifications</span>
                    </button>
                    <div class="dropdown">
                        <button class="btn btn-soft-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="ri-user-line me-1"></i> Admin
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">Profile</a></li>
                            <li><a class="dropdown-item" href="#">Settings</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="adminLogout()">Logout</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container-fluid" style="margin-top: 80px; padding-top: 20px;">
        <!-- Header -->
        <div class="row mb-3 pb-1">
            <div class="col-12">
                <div class="d-flex align-items-lg-center flex-lg-row flex-column">
                    <div class="flex-grow-1">
                        <h4 class="fs-16 mb-1">Good Morning, Admin!</h4>
                        <p class="text-muted mb-0">Here's what's happening with NextGen Perfumes today.</p>
                    </div>
                    <div class="mt-3 mt-lg-0">
                        <div class="row g-2 mb-0 align-items-center">
                            <div class="col-auto">
                                <label for="filter-search" class="visually-hidden">Search</label>
                                <input id="filter-search" type="search" class="form-control form-control-sm" placeholder="Search orders, customers..." aria-label="Search orders and customers">
                            </div>

                            <div class="col-auto">
                                <label for="filter-status" class="visually-hidden">Order Status</label>
                                <select id="filter-status" class="form-select form-select-sm" aria-label="Filter orders by status">
                                    <option value="">All statuses</option>
                                    <option value="processing">Processing</option>
                                    <option value="shipped">Shipped</option>
                                    <option value="delivered">Delivered</option>
                                    <option value="cancelled">Cancelled</option>
                                </select>
                            </div>

                            <div class="col-auto">
                                <label for="filter-date" class="visually-hidden">Date Range</label>
                                <div class="input-group input-group-sm">
                                    <input id="filter-date" type="text" class="form-control border-0 minimal-border dash-filter-picker shadow" placeholder="Select Date Range" aria-label="Filter by date range">
                                    <span class="input-group-text bg-primary border-primary text-white" aria-hidden="true">
                                        <i class="ri-calendar-2-line"></i>
                                    </span>
                                </div>
                            </div>

                            <div class="col-auto">
                                <button id="add-product-btn" type="button" class="btn btn-soft-success material-shadow-none" aria-controls="addProductModal" aria-haspopup="dialog">
                                    <i class="ri-add-circle-line align-middle me-1"></i> Add Perfume
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="row">
            <div class="col-xl-3 col-md-6">
                <div class="card card-animate">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div class="flex-grow-1 overflow-hidden">
                                <p class="text-uppercase fw-medium text-muted text-truncate mb-0">Total Sales</p>
                            </div>
                            <div class="flex-shrink-0">
                                <h5 class="text-success fs-14 mb-0">
                                    <i class="ri-arrow-right-up-line fs-13 align-middle"></i> +24.5%
                                </h5>
                            </div>
                        </div>
                        <div class="d-flex align-items-end justify-content-between mt-4">
                            <div>
                                <h4 class="fs-22 fw-semibold ff-secondary mb-4">$<span class="counter-value">89,250</span></h4>
                                <a href="#" class="text-decoration-underline">View sales report</a>
                            </div>
                            <div class="avatar-sm flex-shrink-0">
                                <span class="avatar-title bg-success-subtle rounded fs-3">
                                    <i class="ri-money-dollar-circle-line text-success"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6">
                <div class="card card-animate">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div class="flex-grow-1 overflow-hidden">
                                <p class="text-uppercase fw-medium text-muted text-truncate mb-0">Orders</p>
                            </div>
                            <div class="flex-shrink-0">
                                <h5 class="text-danger fs-14 mb-0">
                                    <i class="ri-arrow-right-down-line fs-13 align-middle"></i> -2.1%
                                </h5>
                            </div>
                        </div>
                        <div class="d-flex align-items-end justify-content-between mt-4">
                            <div>
                                <h4 class="fs-22 fw-semibold ff-secondary mb-4"><span class="counter-value">1,247</span></h4>
                                <a href="#" class="text-decoration-underline">View all orders</a>
                            </div>
                            <div class="avatar-sm flex-shrink-0">
                                <span class="avatar-title bg-info-subtle rounded fs-3">
                                    <i class="ri-shopping-bag-line text-info"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6">
                <div class="card card-animate">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div class="flex-grow-1 overflow-hidden">
                                <p class="text-uppercase fw-medium text-muted text-truncate mb-0">Customers</p>
                            </div>
                            <div class="flex-shrink-0">
                                <h5 class="text-success fs-14 mb-0">
                                    <i class="ri-arrow-right-up-line fs-13 align-middle"></i> +18.2%
                                </h5>
                            </div>
                        </div>
                        <div class="d-flex align-items-end justify-content-between mt-4">
                            <div>
                                <h4 class="fs-22 fw-semibold ff-secondary mb-4"><span class="counter-value">8,456</span></h4>
                                <a href="#" class="text-decoration-underline">View customers</a>
                            </div>
                            <div class="avatar-sm flex-shrink-0">
                                <span class="avatar-title bg-warning-subtle rounded fs-3">
                                    <i class="ri-user-line text-warning"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6">
                <div class="card card-animate">
                    <div class="card-body">
                        <div class="d-flex align-items-center">
                            <div class="flex-grow-1 overflow-hidden">
                                <p class="text-uppercase fw-medium text-muted text-truncate mb-0">Perfume Stock</p>
                            </div>
                            <div class="flex-shrink-0">
                                <h5 class="text-muted fs-14 mb-0">+0.0%</h5>
                            </div>
                        </div>
                        <div class="d-flex align-items-end justify-content-between mt-4">
                            <div>
                                <h4 class="fs-22 fw-semibold ff-secondary mb-4"><span class="counter-value">2,847</span> units</h4>
                                <a href="#" class="text-decoration-underline">Manage inventory</a>
                            </div>
                            <div class="avatar-sm flex-shrink-0">
                                <span class="avatar-title bg-primary-subtle rounded fs-3">
                                    <i class="ri-flask-line text-primary"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Best Selling Perfumes & Top Categories -->
        <div class="row">
            <div class="col-xl-6">
                <div class="card">
                    <div class="card-header align-items-center d-flex">
                        <h4 class="card-title mb-0 flex-grow-1">Best Selling Perfumes</h4>
                        <div class="flex-shrink-0">
                            <div class="dropdown card-header-dropdown">
                                <a class="text-reset dropdown-btn" href="#" data-bs-toggle="dropdown">
                                    <span class="fw-semibold text-uppercase fs-12">Sort by: </span>
                                    <span class="text-muted">Today<i class="mdi mdi-chevron-down ms-1"></i></span>
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">
                                    <a class="dropdown-item" href="#">Today</a>
                                    <a class="dropdown-item" href="#">This Week</a>
                                    <a class="dropdown-item" href="#">This Month</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive table-card">
                            <table id="best-selling-table" class="table table-hover table-centered align-middle table-nowrap mb-0">
                                <tbody id="best-selling-tbody">
                                    <tr>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="avatar-sm bg-light rounded p-1 me-2">
                                                    <div class="perfume-icon">üåπ</div>
                                                </div>
                                                <div>
                                                    <h5 class="fs-14 my-1">Velvet Rose EDP</h5>
                                                    <span class="text-muted">Women's Collection</span>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <h5 class="fs-14 my-1 fw-normal">$65.00</h5>
                                            <span class="text-muted">Price</span>
                                        </td>
                                        <td>
                                            <h5 class="fs-14 my-1 fw-normal">142</h5>
                                            <span class="text-muted">Sold</span>
                                        </td>
                                        <td>
                                            <h5 class="fs-14 my-1 fw-normal">89</h5>
                                            <span class="text-muted">Stock</span>
                                        </td>
                                        <td>
                                            <h5 class="fs-14 my-1 fw-normal">$9,230</h5>
                                            <span class="text-muted">Revenue</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="avatar-sm bg-light rounded p-1 me-2">
                                                    <div class="perfume-icon">üåô</div>
                                                </div>
                                                <div>
                                                    <h5 class="fs-14 my-1">Midnight Bloom</h5>
                                                    <span class="text-muted">Unisex Collection</span>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <h5 class="fs-14 my-1 fw-normal">$72.00</h5>
                                            <span class="text-muted">Price</span>
                                        </td>
                                        <td>
                                            <h5 class="fs-14 my-1 fw-normal">98</h5>
                                            <span class="text-muted">Sold</span>
                                        </td>
                                        <td>
                                            <h5 class="fs-14 my-1 fw-normal"><span class="badge bg-danger-subtle text-danger">Low Stock</span></h5>
                                            <span class="text-muted">Stock</span>
                                        </td>
                                        <td>
                                            <h5 class="fs-14 my-1 fw-normal">$7,056</h5>
                                            <span class="text-muted">Revenue</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="avatar-sm bg-light rounded p-1 me-2">
                                                    <div class="perfume-icon">üçä</div>
                                                </div>
                                                <div>
                                                    <h5 class="fs-14 my-1">Citrus Zest EDT</h5>
                                                    <span class="text-muted">Men's Collection</span>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <h5 class="fs-14 my-1 fw-normal">$48.00</h5>
                                            <span class="text-muted">Price</span>
                                        </td>
                                        <td>
                                            <h5 class="fs-14 my-1 fw-normal">156</h5>
                                            <span class="text-muted">Sold</span>
                                        </td>
                                        <td>
                                            <h5 class="fs-14 my-1 fw-normal">234</h5>
                                            <span class="text-muted">Stock</span>
                                        </td>
                                        <td>
                                            <h5 class="fs-14 my-1 fw-normal">$7,488</h5>
                                            <span class="text-muted">Revenue</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-6">
                <div class="card card-height-100">
                    <div class="card-header align-items-center d-flex">
                        <h4 class="card-title mb-0 flex-grow-1">Sales by Category</h4>
                        <div class="flex-shrink-0">
                            <button type="button" class="btn btn-soft-primary material-shadow-none btn-sm">
                                Export Report
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="category-stats">
                            <div class="category-item">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span>Women's Perfumes</span>
                                    <span class="fw-bold">45%</span>
                                </div>
                                <div class="progress mb-3" style="height: 8px;">
                                    <div class="progress-bar bg-primary" style="width: 45%"></div>
                                </div>
                            </div>
                            <div class="category-item">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span>Men's Perfumes</span>
                                    <span class="fw-bold">32%</span>
                                </div>
                                <div class="progress mb-3" style="height: 8px;">
                                    <div class="progress-bar bg-success" style="width: 32%"></div>
                                </div>
                            </div>
                            <div class="category-item">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span>Unisex Perfumes</span>
                                    <span class="fw-bold">15%</span>
                                </div>
                                <div class="progress mb-3" style="height: 8px;">
                                    <div class="progress-bar bg-warning" style="width: 15%"></div>
                                </div>
                            </div>
                            <div class="category-item">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span>Gift Sets</span>
                                    <span class="fw-bold">8%</span>
                                </div>
                                <div class="progress mb-3" style="height: 8px;">
                                    <div class="progress-bar bg-info" style="width: 8%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- User Management -->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header align-items-center d-flex">
                        <h4 class="card-title mb-0 flex-grow-1">User Management</h4>
                        <div class="flex-shrink-0">
                            <button type="button" class="btn btn-soft-primary btn-sm" onclick="loadUsers()">
                                <i class="ri-refresh-line"></i> Refresh
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-borderless table-centered align-middle table-nowrap mb-0">
                                <thead class="text-muted table-light">
                                    <tr>
                                        <th>User</th>
                                        <th>Email</th>
                                        <th>Status</th>
                                        <th>Last Login</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="users-tbody">
                                    <!-- Users will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Products Management -->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header align-items-center d-flex">
                        <h4 class="card-title mb-0 flex-grow-1">Products Management</h4>
                        <div class="flex-shrink-0">
                            <button type="button" class="btn btn-soft-primary btn-sm" onclick="loadAllProducts()">
                                <i class="ri-refresh-line"></i> Refresh
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-borderless table-centered align-middle table-nowrap mb-0">
                                <thead class="text-muted table-light">
                                    <tr>
                                        <th>Product</th>
                                        <th>Category</th>
                                        <th>Price</th>
                                        <th>Stock</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="products-tbody">
                                    <!-- Products will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Orders -->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header align-items-center d-flex">
                        <h4 class="card-title mb-0 flex-grow-1">Recent Orders</h4>
                        <div class="flex-shrink-0">
                            <button type="button" class="btn btn-soft-info btn-sm material-shadow-none">
                                <i class="ri-file-list-3-line align-middle"></i> Generate Report
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive table-card">
                            <table id="recent-orders-table" class="table table-borderless table-centered align-middle table-nowrap mb-0">
                                <thead class="text-muted table-light">
                                    <tr>
                                        <th scope="col">Order ID</th>
                                        <th scope="col">Customer</th>
                                        <th scope="col">Perfume</th>
                                        <th scope="col">Amount</th>
                                        <th scope="col">Status</th>
                                        <th scope="col">Date</th>
                                    </tr>
                                </thead>
                                <tbody id="recent-orders-tbody">
                                    <tr>
                                        <td><a href="#" class="fw-medium link-primary">#NG2024001</a></td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="flex-shrink-0 me-2">
                                                    <div class="avatar-xs rounded-circle bg-primary text-white d-flex align-items-center justify-content-center">
                                                        S
                                                    </div>
                                                </div>
                                                <div class="flex-grow-1">Sarah Johnson</div>
                                            </div>
                                        </td>
                                        <td>Velvet Rose EDP 50ml</td>
                                        <td><span class="text-success">$65.00</span></td>
                                        <td><span class="badge bg-success-subtle text-success">Delivered</span></td>
                                        <td>Dec 15, 2024</td>
                                    </tr>
                                    <tr>
                                        <td><a href="#" class="fw-medium link-primary">#NG2024002</a></td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="flex-shrink-0 me-2">
                                                    <div class="avatar-xs rounded-circle bg-info text-white d-flex align-items-center justify-content-center">
                                                        M
                                                    </div>
                                                </div>
                                                <div class="flex-grow-1">Michael Chen</div>
                                            </div>
                                        </td>
                                        <td>Citrus Zest EDT 100ml</td>
                                        <td><span class="text-success">$48.00</span></td>
                                        <td><span class="badge bg-warning-subtle text-warning">Processing</span></td>
                                        <td>Dec 14, 2024</td>
                                    </tr>
                                    <tr>
                                        <td><a href="#" class="fw-medium link-primary">#NG2024003</a></td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="flex-shrink-0 me-2">
                                                    <div class="avatar-xs rounded-circle bg-success text-white d-flex align-items-center justify-content-center">
                                                        E
                                                    </div>
                                                </div>
                                                <div class="flex-grow-1">Emma Wilson</div>
                                            </div>
                                        </td>
                                        <td>Midnight Bloom Gift Set</td>
                                        <td><span class="text-success">$125.00</span></td>
                                        <td><span class="badge bg-info-subtle text-info">Shipped</span></td>
                                        <td>Dec 13, 2024</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/api.js"></script>
    <script src="../js/dashboard.js"></script>

    <!-- Edit Product Modal -->
    <div class="modal fade" id="editProductModal" tabindex="-1" aria-labelledby="editProductModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <form id="edit-product-form">
                    <div class="modal-header">
                        <h5 class="modal-title" id="editProductModalLabel">Edit Product</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <input type="hidden" id="edit-product-id" name="id">
                        <div class="mb-3">
                            <label for="edit-product-name" class="form-label">Name</label>
                            <input id="edit-product-name" name="name" required class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="edit-product-description" class="form-label">Description</label>
                            <textarea id="edit-product-description" name="description" class="form-control" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="edit-product-category" class="form-label">Category</label>
                            <select id="edit-product-category" name="category" class="form-select">
                                <option value="womens">Women's</option>
                                <option value="mens">Men's</option>
                                <option value="unisex">Unisex</option>
                                <option value="gift_sets">Gift Sets</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="edit-product-price" class="form-label">Price ($)</label>
                            <input id="edit-product-price" name="price" type="number" step="0.01" required class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="edit-product-stock" class="form-label">Stock Quantity</label>
                            <input id="edit-product-stock" name="stock_quantity" type="number" required class="form-control">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Update Product</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Product Modal -->
    <div class="modal fade" id="addProductModal" tabindex="-1" aria-labelledby="addProductModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <form id="add-product-form">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addProductModalLabel">Add New Perfume</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="product-name" class="form-label">Name</label>
                            <input id="product-name" name="name" required class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="product-description" class="form-label">Description</label>
                            <textarea id="product-description" name="description" class="form-control" rows="3" placeholder="Enter product description..."></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="product-category" class="form-label">Category</label>
                            <select id="product-category" name="category" class="form-select">
                                <option value="womens">Women's</option>
                                <option value="mens">Men's</option>
                                <option value="unisex">Unisex</option>
                                <option value="gift_sets">Gift Sets</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="product-price" class="form-label">Price ($)</label>
                            <input id="product-price" name="price" type="number" step="0.01" required class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="product-stock" class="form-label">Stock Quantity</label>
                            <input id="product-stock" name="stock" type="number" required class="form-control">
                        </div>
                        <div class="mb-3">
                            <label for="product-image" class="form-label">Product Image</label>
                            <input id="product-image" name="image" type="file" accept="image/*" class="form-control">
                            <div class="form-text">Upload a product image (JPG, PNG, GIF)</div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Product</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>